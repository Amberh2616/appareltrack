{% extends "pdf/base.html" %}

{% block title %}T2 PO - {{ po.po_no }}{% endblock %}

{% block content %}
<h1>Tier 2 Purchase Order</h1>

<div class="header-info">
    <p><strong>PO Number:</strong> {{ po.po_no|default:"N/A" }}</p>
    <p><strong>Supplier:</strong> {{ po.supplier_name|default:"N/A" }}</p>
    <p><strong>Status:</strong> {{ po.get_status_display|default:po.status|default:"N/A" }}</p>
    <p><strong>Version:</strong> v{{ po.version_no|default:"1" }}</p>
    <p><strong>Created:</strong> {{ po.created_at|date:"Y-m-d"|default:"N/A" }}</p>
    {% if po.delivery_date %}<p><strong>Delivery Date:</strong> {{ po.delivery_date|date:"Y-m-d" }}</p>{% endif %}
    {% if po.total_amount %}<p><strong>Total Amount:</strong> ${{ po.total_amount|floatformat:2 }}</p>{% endif %}
</div>

{% if po.notes %}
<h2>Notes</h2>
<p>{{ po.notes }}</p>
{% endif %}

<h2>Line Items</h2>
{% if lines %}
<table>
    <thead>
        <tr>
            <th style="width: 5%;">Line</th>
            <th style="width: 35%;">Material</th>
            <th style="width: 15%;">Quantity</th>
            <th style="width: 10%;">UOM</th>
            <th style="width: 15%;">Unit Price</th>
            <th style="width: 20%;">Line Total</th>
        </tr>
    </thead>
    <tbody>
        {% for line in lines %}
        <tr>
            <td>{{ line.line_no|default:forloop.counter }}</td>
            <td>{{ line.material_name|default:"N/A" }}</td>
            <td>{{ line.quantity|floatformat:2|default:"0.00" }}</td>
            <td>{{ line.uom|default:"" }}</td>
            <td>${{ line.unit_price|floatformat:2|default:"0.00" }}</td>
            <td>${{ line.line_total|floatformat:2|default:"0.00" }}</td>
        </tr>
        {% endfor %}

        {% if po.total_amount %}
        <tr style="background-color: #f0f0f0; font-weight: bold;">
            <td colspan="5" style="text-align: right;">TOTAL:</td>
            <td>${{ po.total_amount|floatformat:2 }}</td>
        </tr>
        {% endif %}
    </tbody>
</table>
{% else %}
<div class="no-data">No line items available</div>
{% endif %}

{% if po.terms_and_conditions %}
<h2>Terms & Conditions</h2>
<p>{{ po.terms_and_conditions }}</p>
{% endif %}
{% endblock %}
