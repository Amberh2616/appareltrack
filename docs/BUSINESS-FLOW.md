# Fashion Production System - Business Flow

**Last Updated:** 2026-01-12

æ­¤æ–‡æª”è©³ç´°èªªæ˜ç³»çµ±çš„æ¥­å‹™æµç¨‹ã€æ•¸æ“šæ¨¡å‹å’Œæ ¸å¿ƒè¨­è¨ˆæ€æƒ³ã€‚

---

## ç›®éŒ„

- [æ ¸å¿ƒç”¢å“æ€æƒ³](#æ ¸å¿ƒç”¢å“æ€æƒ³)
- [å®Œæ•´æ¥­å‹™æµç¨‹](#å®Œæ•´æ¥­å‹™æµç¨‹)
- [ç”¨é‡æ•¸æ“šæµ](#ç”¨é‡æ•¸æ“šæµ)
- [å ±åƒ¹æµç¨‹è¨­è¨ˆ](#å ±åƒ¹æµç¨‹è¨­è¨ˆ)
- [è§¸ç™¼é»è¨­è¨ˆ](#è§¸ç™¼é»è¨­è¨ˆ)
- [Tech Pack ç¿»è­¯æµç¨‹](#tech-pack-ç¿»è­¯æµç¨‹)

---

## æ ¸å¿ƒç”¢å“æ€æƒ³

> **é€™æ˜¯æ•´å€‹ç³»çµ±çš„æ ¸å¿ƒéˆé­‚ï¼Œæ‰€æœ‰åŠŸèƒ½è¨­è¨ˆå¿…é ˆåœç¹é€™å€‹æ€æƒ³ã€‚**

### ä¸»è¦ç”¨æˆ¶ï¼šæˆè¡£å» ï¼ˆGarment Factoryï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ç³»çµ±æ ¸å¿ƒå®šä½                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  âŒ éŒ¯èª¤ç†è§£ï¼šã€Œå“ç‰Œå¼·è¿«ä¾›æ‡‰å•†ç”¨é€™å€‹ç³»çµ±ã€                        â”‚
â”‚                                                                 â”‚
â”‚  âœ… æ­£ç¢ºç†è§£ï¼šã€Œæˆè¡£å» è‡ªå·±æƒ³ç”¨ï¼Œå“ç‰Œé †ä¾¿å¾—åˆ°ç›£æ§ã€                â”‚
â”‚                                                                 â”‚
â”‚  ä¸»è¦ç”¨æˆ¶ = æˆè¡£å» ï¼ˆæ“ä½œè€…ã€ä»˜è²»è€…ï¼‰                             â”‚
â”‚  æ¬¡è¦å—ç›Šè€… = å“ç‰Œï¼ˆç²å¾—å¯è¦–æ€§ï¼Œæ¸›å°‘æ´¾äººç›£ç£æˆæœ¬ï¼‰               â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æˆè¡£å» çš„åƒ¹å€¼ä¸»å¼µ

```
æˆè¡£å» ç‚ºä»€éº¼æƒ³ç”¨é€™å¥—ç³»çµ±ï¼Ÿ
â”œâ”€â”€ 1. çœäººåŠ›ï¼ˆ1 å¥—ç³»çµ± = 10-20 äººçš„è·Ÿå–®å·¥ä½œï¼‰
â”œâ”€â”€ 2. æ›´å¥½çš„é€²åº¦ç›£æ§ï¼ˆAI æ™ºèƒ½è¿½è¹¤ï¼Œä¸éºæ¼ï¼‰
â”œâ”€â”€ 3. æ¸›å°‘éŒ¯èª¤ï¼ˆBOM è‡ªå‹•è¨ˆç®—ï¼Œæ¡è³¼ä¸æ¼é …ï¼‰
â”œâ”€â”€ 4. è³‡æ–™å¯è¿½æº¯ï¼ˆå®¢æˆ¶æŠ•è¨´æ™‚æœ‰è­‰æ“šï¼‰
â””â”€â”€ 5. æ±ºç­–ä¾æ“šï¼ˆæˆæœ¬é€æ˜ã€é¢¨éšªå¯è¦‹ï¼‰
```

### å“ç‰Œçš„é™„åŠ åƒ¹å€¼

```
å“ç‰Œç‚ºä»€éº¼å–œæ­¡ä¾›æ‡‰å•†ç”¨é€™å¥—ç³»çµ±ï¼Ÿ
â”œâ”€â”€ 1. ä¸ç”¨æ´¾äººå»å·¥å» ç›¯é€²åº¦ï¼ˆç³»çµ±è‡ªå‹•åŒæ­¥ï¼‰
â”œâ”€â”€ 2. WIP ç‹€æ…‹å³æ™‚å¯è¦‹ï¼ˆSupplier Portalï¼‰
â”œâ”€â”€ 3. äº¤æœŸé æ¸¬æ›´æº–ç¢ºï¼ˆAI é¢¨éšªé è­¦ï¼‰
â”œâ”€â”€ 4. å“è³ªå•é¡Œå¯è¿½æº¯ï¼ˆå¯©è¨ˆæ—¥èªŒï¼‰
â””â”€â”€ 5. çœç›£ç£äººåŠ›æˆæœ¬ï¼ˆAI ä»£æ›¿äººå·¥è¿½è¹¤ï¼‰
```

### å•†æ¥­æ¨¡å¼

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                                 â”‚
â”‚  æˆè¡£å» ä»˜è²» â†’ å¾—åˆ°çœäººåŠ›çš„å·¥å…·                                   â”‚
â”‚       â†“                                                         â”‚
â”‚  å“ç‰Œå…è²»ç²å¾— â†’ ä¾›æ‡‰éˆå¯è¦–æ€§ï¼ˆSupplier Portalï¼‰                  â”‚
â”‚       â†“                                                         â”‚
â”‚  é›™è´ â†’ æˆè¡£å» çœéŒ¢ï¼Œå“ç‰ŒçœäººåŠ›ï¼Œéƒ½é–‹å¿ƒ                           â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

é€™å°±æ˜¯ç‚ºä»€éº¼ç³»çµ±å€¼ NT$3,000,000+ï¼š
â”œâ”€â”€ å°æˆè¡£å» ï¼šå¹´çœ NT$3,500,000+ äººåŠ›æˆæœ¬
â”œâ”€â”€ å°å“ç‰Œï¼šå…è²»ç²å¾—ä¾›æ‡‰å•†ç›£æ§ï¼ˆå“ç‰Œä¸ç”¨ä»˜éŒ¢ï¼‰
â””â”€â”€ å°ä½ ï¼šæˆè¡£å» ä»˜è²»ï¼Œå“ç‰Œæ¨è–¦ä½¿ç”¨
```

---

## å®Œæ•´æ¥­å‹™æµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           æˆè¡£å» å®Œæ•´å·¥ä½œæµç¨‹                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ã€Phase 1: é–‹ç™¼éšæ®µã€‘ âœ… å·²å®Œæˆ
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Tech Pack ä¸Šå‚³ â†’ AI è§£æ â†’ BOM æå– â†’ ç¿»è­¯å¯©æ ¡ â†’ Style/Revision æ‰¹å‡†


ã€Phase 2: æ¨£è¡£éšæ®µã€‘ âœ… å·²å®Œæˆ
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
SampleRequest
â”œâ”€â”€ Run 1: Proto Sample (åŸç‰ˆæ¨£) â†’ Estimate âœ… éœ€å ±åƒ¹
â”œâ”€â”€ Run 2-N: Fit Sample (å°ºå¯¸æ¨£) â†’ Estimate âœ… éœ€å ±åƒ¹ã€å¯å¤šè¼ªã€‘
â”‚            â”œâ”€ Fit 1st â†’ å®¢æˆ¶è©•è«– â†’ èª¿æ•´
â”‚            â”œâ”€ Fit 2nd â†’ å®¢æˆ¶è©•è«– â†’ èª¿æ•´
â”‚            â””â”€ Fit Nth â†’ å®¢æˆ¶æ‰¹å‡†
â”œâ”€â”€ Run N+1: Size Set Sample (å…¨å¥—å°ºå¯¸æ¨£) â†’ Estimate âœ… éœ€å ±åƒ¹
â”‚                                              â”‚
â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
â”‚   ğŸ“ ç”¨é‡ç¢ºèª (confirmed_value â†’ locked_value)
â”‚   ğŸ“ å¤§è²¨å ±åƒ¹ (CostSheet Bulk)
â”‚   ğŸ“ å®¢æˆ¶ç¢ºèªä¸‹å–® â†’ ProductionOrder
â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
â”‚
â”œâ”€â”€ Run N+2: PP Sample (ç”¢å‰æ¨£) â†’ âŒ ä¸å ±åƒ¹ï¼ˆåƒ¹æ ¼å·²å®šï¼‰
â””â”€â”€ Run N+3: TOP Sample (é ­ç¼¸æ¨£) â†’ âŒ ä¸å ±åƒ¹ï¼ˆå¾å¤§è²¨æ‰£é™¤ï¼‰


ã€Phase 3: å ±åƒ¹éšæ®µã€‘
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
CostSheet (Bulk Costing)
â”œâ”€â”€ ç”¨é‡ï¼šlocked_value (é–å®šç”¨é‡)
â”œâ”€â”€ ç‰©æ–™æˆæœ¬ = BOM Ã— locked_value Ã— å–®åƒ¹ Ã— (1 + æè€—%)
â”œâ”€â”€ äººå·¥æˆæœ¬ + è£½é€ è²»ç”¨ + åˆ©æ½¤ margin
â””â”€â”€ è¼¸å‡ºï¼šå ±åƒ¹å–® PDF â†’ ç™¼çµ¦å®¢æˆ¶


ã€Phase 4: å¤§è²¨éšæ®µã€‘ âœ… P17+ å®Œæˆ
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ProductionOrder (å¤§è²¨è¨‚å–®) âœ…
â”œâ”€â”€ å®¢æˆ¶ç¢ºèªå ±åƒ¹ â†’ ä¸‹å–®
â”œâ”€â”€ å°ºç¢¼åˆ†è§£ (S=1000, M=3000, L=4000, XL=2000)
â””â”€â”€ ç¸½æ•¸é‡ï¼š10,000 ä»¶
         â”‚
         â†“
MaterialRequirement (ç‰©æ–™éœ€æ±‚è¨ˆç®— MRP) âœ…
â”œâ”€â”€ æ¯å€‹ BOM é …ç›®ï¼šè¨‚å–®æ•¸é‡ Ã— consumption Ã— (1 + æè€—%)
â””â”€â”€ è¼¸å‡ºï¼šç‰©æ–™éœ€æ±‚æ¸…å–®ï¼ˆè‡ªå‹•è¨ˆç®—ï¼‰
         â”‚
         â†“ â­ æ¯ç­†ç‰©æ–™å–®ç¨å¯©æ ¸
         â”‚
â”œâ”€â”€ å¯©æ ¸ï¼šç¢ºèªæ•¸é‡ã€å–®åƒ¹ã€éœ€æ±‚æ—¥æœŸã€é è¨ˆäº¤æœŸ
â”œâ”€â”€ ä¸‹æ¡è³¼å–®ï¼šæ¯ç­†ç‰©æ–™ç”Ÿæˆç¨ç«‹ POï¼ˆæ–¹ä¾¿è¿½è¹¤ï¼‰
â””â”€â”€ äº¤æœŸè¿½è¹¤ï¼špending â†’ shipped â†’ received
         â”‚
         â†“
PurchaseOrder (æ¯ç­†ç‰©æ–™ç¨ç«‹æ¡è³¼å–®) âœ…
â”œâ”€â”€ ä¸‹è¼‰ PDF â†’ ç™¼é€çµ¦ä¾›æ‡‰å•†
â””â”€â”€ è¿½è¹¤äº¤æœŸ + æ”¶è²¨ç‹€æ…‹
```

### æ¨£è¡£é¡å‹å°ç…§è¡¨

| Run | é¡å‹ | æ•¸é‡ | éœ€å ±åƒ¹ï¼Ÿ | èªªæ˜ |
|-----|------|------|----------|------|
| 1 | Proto Sample (åŸç‰ˆæ¨£) | 1-3 ä»¶ | âœ… æ˜¯ | ç¢ºèªç‰ˆå‹è¨­è¨ˆ |
| 2-N | Fit Sample (å°ºå¯¸æ¨£) | 2-5 ä»¶/è¼ª | âœ… æ˜¯ | ç¢ºèªåˆèº«åº¦ï¼Œ**å¯å¤šè¼ª** |
| N+1 | Size Set Sample (å…¨å¥—å°ºå¯¸æ¨£) | 5-50 ä»¶ | âœ… æ˜¯ | æœ€å¾Œå ±åƒ¹æ¨£ |
| | **â•â•â• å¤§è²¨å ±åƒ¹ + ä¸‹å–® â•â•â•** | | | |
| N+2 | PP Sample (ç”¢å‰æ¨£) | 10-30 ä»¶ | âŒ å¦ | åƒ¹æ ¼å·²å®š |
| N+3 | TOP Sample (é ­ç¼¸æ¨£) | 50+ ä»¶ | âŒ å¦ | å¾å¤§è²¨æ‰£é™¤ |

> **Fit Sample å¤šè¼ªèªªæ˜ï¼š** å¯¦éš›æ¥­å‹™ä¸­ï¼ŒFit Sample é€šå¸¸éœ€è¦ 1-5 è¼ªèª¿æ•´æ‰èƒ½é”åˆ°å®¢æˆ¶æ»¿æ„çš„åˆèº«åº¦ã€‚æ¯è¼ªéƒ½æ˜¯ç¨ç«‹çš„ SampleRunï¼Œéœ€è¦ç¨ç«‹å ±åƒ¹å’Œæˆæœ¬è¿½è¹¤ã€‚

---

## ç”¨é‡æ•¸æ“šæµ

### ä¸‰éšæ®µæˆç†Ÿåº¦

```
BOMItem.consumption (åŸå§‹ç”¨é‡ - Tech Pack æ¨™è¨»)
     â”‚
     â”œâ”€â”€â†’ pre_estimate_value (é ä¼°ç”¨é‡)
     â”‚    â”œâ”€ ä¾†æºï¼šå·¥å» ç¶“é©—ä¼°ç®—
     â”‚    â””â”€ ç”¨é€”ï¼šRFQ è©¢åƒ¹å–® âœ…
     â”‚
     â”œâ”€â”€â†’ confirmed_value (ç¢ºèªç”¨é‡)
     â”‚    â”œâ”€ ä¾†æºï¼šMarker Report / æ¨£è¡£å¯¦éš›
     â”‚    â””â”€ ç”¨é€”ï¼šRFQ âœ… / å¤§è²¨å ±åƒ¹ âœ… / ç”Ÿç”¢æ¡è³¼ âœ…
     â”‚
     â””â”€â”€â†’ locked_value (é–å®šç”¨é‡)
          â”œâ”€ ä¾†æºï¼šå¤§è²¨ç¢ºèªé–å®šï¼ˆä¸å¯å†æ”¹ï¼‰
          â””â”€ ç”¨é€”ï¼šæœ€çµ‚ç”Ÿç”¢æ¡è³¼ âœ… / MRP è¨ˆç®— âœ… / æˆæœ¬çµç®— âœ…
```

### æ¡è³¼æ•¸é‡è¨ˆç®—å…¬å¼

```
æ¡è³¼æ•¸é‡ = è¨‚å–®æ•¸é‡ Ã— locked_value Ã— (1 + wastage_pct%)

ç¯„ä¾‹ï¼š
= 10,000 ä»¶ Ã— 0.82 yd Ã— 1.05 = 8,610 yards
```

### MRP è¨ˆç®—å…¬å¼

```
gross_requirement = order_quantity Ã— consumption_per_piece
wastage_quantity = gross_requirement Ã— wastage_pct%
total_requirement = gross_requirement + wastage_quantity
order_quantity_needed = max(0, total_requirement - current_stock)
```

---

## å ±åƒ¹æµç¨‹è¨­è¨ˆ

### çµ±ä¸€å ±åƒ¹æ¶æ§‹ï¼ˆP18ï¼‰

```
ã€Phase 1: æ¨£è¡£å ±åƒ¹ã€‘Run 1-3
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
  SampleRun (Proto/Fit/Size Set)
       â”‚
       â”œâ”€â”€â†’ UsageScenario (purpose='sample_quote')
       â”‚         â””â”€â”€â†’ UsageLine[] (consumption = pre_estimate_value)
       â”‚
       â””â”€â”€â†’ CostSheetVersion (costing_type='sample')
                 â”œâ”€â”€ material_cost (å¾ CostLineV2 è¨ˆç®—)
                 â”œâ”€â”€ labor_cost (æ‰‹å·¥è¼¸å…¥æˆ–é è¨­)
                 â”œâ”€â”€ overhead_cost
                 â””â”€â”€ unit_price (å«åˆ©æ½¤)

                   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                   ğŸ“ Size Set å®Œæˆå¾Œï¼Œç”¨é‡é–å®š
                   ğŸ“ confirmed_value â†’ locked_value
                   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ã€Phase 2: å¤§è²¨å ±åƒ¹ã€‘å®¢æˆ¶è©¢åƒ¹
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
  â­ CostSheetVersion (costing_type='bulk')
       â”‚
       â”œâ”€â”€â†’ cloned_from = æœ€å¾Œä¸€ç‰ˆ Sample CostSheet â¬…ï¸ é—œéµé€£çµï¼
       â”‚
       â”œâ”€â”€â†’ UsageScenario (purpose='bulk_quote')
       â”‚         â””â”€â”€â†’ UsageLine[] (consumption = locked_value)
       â”‚
       â”œâ”€â”€ material_cost (å¾é–å®šç”¨é‡é‡æ–°è¨ˆç®—)
       â”œâ”€â”€ labor_cost (å¯èƒ½å› é‡å¤§èª¿æ•´)
       â”œâ”€â”€ quantity_based_discount (é‡å¤§æŠ˜æ‰£)
       â””â”€â”€ unit_price (å¤§è²¨åƒ¹)

                   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
                   ğŸ“ å®¢æˆ¶ç¢ºèªå ±åƒ¹ â†’ status = 'accepted'
                   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ã€Phase 3: ç”Ÿç”¢è¨‚å–®ã€‘å®¢æˆ¶ä¸‹å–®
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
  ProductionOrder
       â”œâ”€â”€â†’ bulk_costing FK = CostSheetVersion (accepted)
       â”œâ”€â”€ unit_price (æˆäº¤åƒ¹ï¼Œå¾å ±åƒ¹å¸¶å…¥)
       â””â”€â”€â†’ MaterialRequirement[] (MRP è¨ˆç®—)
```

### å ±åƒ¹æ¨¡å‹æ¶æ§‹

```
UsageScenario (ç”¨é‡å ´æ™¯)
â”œâ”€â”€ purpose: 'sample_quote' | 'bulk_quote'
â”œâ”€â”€ version_no
â””â”€â”€ UsageLine[] (ç‰©æ–™ç”¨é‡)
         â”‚
         â†“
CostSheetVersion (å ±åƒ¹ç‰ˆæœ¬)
â”œâ”€â”€ costing_type: 'sample' | 'bulk'
â”œâ”€â”€ status: draft â†’ submitted â†’ accepted/rejected
â”œâ”€â”€ cloned_from FK (ç‰ˆæœ¬è¿½æº¯) â­ æ ¸å¿ƒé€£çµ
â””â”€â”€ CostLineV2[] (æˆæœ¬æ˜ç´°)
```

### é€£è²«æ€§è¨­è¨ˆè¦é»

| é …ç›® | è¨­è¨ˆ |
|------|------|
| **ç”¨é‡æ¼”é€²** | `pre_estimate_value` â†’ `confirmed_value` â†’ `locked_value` |
| **å ±åƒ¹ç‰ˆæœ¬** | Sample v1 â†’ v2 â†’ Bulk v1 (cloned_from = Sample v2) |
| **åƒ¹æ ¼è¿½æº¯** | Bulk å ±åƒ¹å¯è¿½æº¯åˆ°åŸå§‹ Sample å ±åƒ¹ |
| **å·®ç•°åˆ†æ** | æ¯”è¼ƒ Sample vs Bulk åƒ¹æ ¼å·®ç•°åŸå›  |
| **ç‹€æ…‹é€£å‹•** | Sample accepted â†’ è§¸ç™¼ Bulk quote å‰µå»ºæŒ‰éˆ•é¡¯ç¤º |

---

## è§¸ç™¼é»è¨­è¨ˆ

### å®Œæ•´æµç¨‹è§¸ç™¼é»

| è§¸ç™¼é» | æŒ‰éˆ•æ–‡å­— | ä½ç½® | é¡¯ç¤ºæ¢ä»¶ | API |
|--------|----------|------|----------|-----|
| T1 | Create Sample Request | Revision è©³æƒ…é  | Revision approved | `POST /sample-requests/` |
| T2 | Edit Costing | Kanban Run å¡ç‰‡ | Run å­˜åœ¨ | - |
| T3 | Submit Quote | Costing ç·¨è¼¯é  | status='draft' | `POST /cost-sheets/{id}/submit/` |
| T4 | Accept Quote | Kanban ç‹€æ…‹æŒ‰éˆ• | status='quoted' | `POST /sample-runs/{id}/accept/` |
| T5 | Sample Done | Kanban ç‹€æ…‹æŒ‰éˆ• | Size Set Run | `POST /sample-runs/{id}/complete/` |
| **T6** | **Create Bulk Quote** | Request è©³æƒ…é  | Size Set completed | `POST /cost-sheets/{id}/create-bulk-quote/` |
| T7 | Submit Bulk Quote | Bulk Costing é  | status='draft' | `POST /cost-sheets/{id}/submit/` |
| **T8** | **Create Production Order** | Bulk CostSheet é  | Bulk accepted | `POST /production-orders/` |
| T9 | Confirm Order | PO è©³æƒ…é  | status='draft' | `POST /production-orders/{id}/confirm/` |
| T10 | Generate PO | PO è©³æƒ…é  | status='confirmed' | `POST /production-orders/{id}/generate-po/` |

### æµç¨‹é€£çµå®Œæ•´æ€§

```
SampleRun (Size Set, accepted)
     â”‚
     â”œâ”€â”€â†’ costing_version FK â†’ CostSheetVersion (sample)
     â”‚                              â”‚
     â”‚                              â†“ POST /create-bulk-quote/
     â”‚                         CostSheetVersion (bulk, accepted)
     â”‚                              â”‚
     â”‚                              â†“ POST /create-production-order/
     â”‚                         ProductionOrder
     â”‚                              â”œâ”€â”€â†’ bulk_costing FK
     â”‚                              â”œâ”€â”€â†’ approved_sample_run FK â† åå‘é€£çµï¼
     â”‚                              â”‚
     â”‚                              â†“ POST /generate-po/
     â”‚                         PurchaseOrder + POLine
     â”‚                              â”‚
     â”‚                              â†“ Signal: post_save
     â”‚                         MaterialRequirement.status = 'ordered'/'received'
```

---

## Tech Pack ç¿»è­¯æµç¨‹

### å®Œæ•´æµç¨‹

```
éšæ®µ 1ï¼šä¸Šå‚³èˆ‡åˆ†é¡
  â””â†’ /dashboard/upload
  â””â†’ POST /api/v2/uploaded-documents/
  â””â†’ POST /api/v2/uploaded-documents/{id}/classify/

éšæ®µ 2ï¼šAI æå–
  â””â†’ /dashboard/documents/{id}/review
  â””â†’ POST /api/v2/uploaded-documents/{id}/extract/
  â””â†’ å‰µå»º TechPackRevision + DraftBlocks
  â””â†’ è¿”å› tech_pack_revision_id

éšæ®µ 3ï¼šäººå·¥å¯©æ ¡
  â””â†’ âš¡ è‡ªå‹•å°èˆªï¼ˆ2ç§’å¾Œï¼‰åˆ° /dashboard/revisions/{id}/review
  â””â†’ PATCH /api/v2/draft-blocks/{id}/ ï¼ˆç·¨è¼¯ edited_textï¼‰
  â””â†’ POST /api/v2/revisions/{id}/approve/

éšæ®µ 4ï¼šBOM/Spec ç¿»è­¯
  â””â†’ /dashboard/revisions/{id}/bom - BOM ç¿»è­¯ç·¨è¼¯
  â””â†’ /dashboard/revisions/{id}/spec - Spec ç¿»è­¯ç·¨è¼¯
  â””â†’ å–®é …ç¿»è­¯ + æ‰¹é‡ AI ç¿»è­¯

éšæ®µ 5ï¼šMWO å®Œæ•´åŒ¯å‡º
  â””â†’ GET /api/v2/sample-runs/{id}/export-mwo-complete-pdf/
  â””â†’ å°é¢ + Tech Packï¼ˆä¸­æ–‡ç–ŠåŠ ï¼‰+ BOM + Spec
  â””â†’ Pillow + PyMuPDF æ¸²æŸ“ä¸­æ–‡
```

### é›™ Revision è¨­è¨ˆ

ç³»çµ±å‰µå»ºå…©å€‹ Revision é¡å‹ï¼š

| Revision é¡å‹ | ç”¨é€” | é—œè¯æ•¸æ“š |
|---------------|------|----------|
| `StyleRevision` | BOM/Measurement ç·¨è¼¯ | BOMItem, Measurement |
| `TechPackRevision (Revision)` | DraftBlocks ç¿»è­¯å¯©æ ¡ | DraftBlock |

### MWO åŒ¯å‡ºå…§å®¹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              SampleMWO                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 1. å°é¢é ï¼ˆä¸­è‹±é›™èª MWO è³‡è¨Šï¼‰           â”‚
â”‚                                         â”‚
â”‚ 2. Tech Pack (åšå·¥å’Œçµæ§‹)                â”‚
â”‚    â””â”€â”€ ä¸­æ–‡ç–ŠåŠ åœ¨åŸåœ–ä¸Š                  â”‚
â”‚                                         â”‚
â”‚ 3. BOM (ç‰©æ–™æ¸…å–®)                        â”‚
â”‚    â””â”€â”€ å«ä¸­æ–‡ç¿»è­¯ï¼ˆè—è‰²å­—ï¼‰              â”‚
â”‚                                         â”‚
â”‚ 4. Spec (å°ºå¯¸è¡¨)                         â”‚
â”‚    â””â”€â”€ å«ä¸­æ–‡ç¿»è­¯ï¼ˆè—è‰²å­—ï¼‰              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## è³‡æ–™æ¨¡å‹

### æ ¸å¿ƒé—œè¯

```
Style â†’ Revision â†’ BOMItem (Verified)
                 â†’ Measurement
                 â†’ SampleRequest â†’ SampleRun â†’ MWO
                                            â†’ CostSheetVersion
                                            â†’ PurchaseOrder
                 â†’ ProductionOrder â†’ MaterialRequirement â†’ PurchaseOrder
```

### ç‹€æ…‹æ©Ÿ

#### SampleRun

```
DRAFT â†’ SUBMITTED â†’ QUOTED â†’ PENDING_APPROVAL â†’ APPROVED
                                              â†’ REJECTED
APPROVED â†’ MATERIALS â†’ PO_ISSUED â†’ IN_PRODUCTION â†’ COMPLETED
ANY â†’ CANCELLED
```

**12 ç‹€æ…‹è©³ç´°ï¼š**

| ç‹€æ…‹ | é€²åº¦ | èªªæ˜ |
|------|------|------|
| draft | 0% | è‰ç¨¿ |
| materials_planning | 10% | ç‰©æ–™è¦åŠƒä¸­ |
| po_drafted | 20% | PO å·²èµ·è‰ |
| po_issued | 30% | PO å·²ç™¼å‡º |
| mwo_drafted | 40% | MWO å·²èµ·è‰ |
| mwo_issued | 50% | MWO å·²ç™¼å‡º |
| in_progress | 60% | ç”Ÿç”¢ä¸­ |
| sample_done | 70% | æ¨£è¡£å®Œæˆ |
| actuals_recorded | 80% | å¯¦éš›æ•¸æ“šå·²è¨˜éŒ„ |
| costing_generated | 90% | æˆæœ¬å·²ç”Ÿæˆ |
| quoted | 95% | å·²å ±åƒ¹ |
| accepted | 100% | å·²æ¥å— |

#### PurchaseOrder

```
draft â†’ sent â†’ confirmed â†’ partial_received/received
any â†’ cancelled
```

#### ProductionOrder

```
draft â†’ confirmed â†’ materials_ordered â†’ in_production â†’ completed
```

#### CostSheetVersion

draft â†’ submitted â†’ accepted/rejected
```

---

## è¨­è¨ˆåŸå‰‡

1. **å¿«ç…§åŸå‰‡**ï¼šRun çš„ BOM/Operation æ˜¯è¤‡è£½ï¼Œä¸æ˜¯ FK
2. **ä¸å¯å›å¯«**ï¼šPhase 3 è³‡æ–™ä¸å¾—ä¿®æ”¹ Phase 2 çš„ verified è³‡æ–™
3. **æ¡è³¼æ‹†å–®**ï¼šT2 PO æŒ‰ä¾›æ‡‰å•†æ‹†åˆ†ï¼Œåˆ† Draft/Issued
4. **æ–‡ä»¶ç·¨è™Ÿ**ï¼šMWO-YYMM-XXXXXX æ ¼å¼ï¼Œç”¨ sequence é¿å…æ’è™Ÿ
5. **SampleRun æ˜¯å”¯ä¸€çš„ã€ŒåŸ·è¡ŒçœŸç›¸ä¾†æºã€**ï¼šMWO / Estimate / T2 PO éƒ½æ˜¯ Run çš„è¼¸å‡ºæ–‡ä»¶
